"0","#filter data"
"0","#tempdf <- subset(dataset2, select=-c(DATETIME,STATUS_PU1,STATUS_PU2,STATUS_PU3,STATUS_PU4,STATUS_PU5,STATUS_PU6,STATUS_PU7,STATUS_PU8,STATUS_PU9,STATUS_PU10,STATUS_PU11,STATUS_V2,ATT_FLAG))"
"0","#tempdf <- subset(dataset3, select=-c(DATETIME,STATUS_PU1,STATUS_PU2,STATUS_PU3,STATUS_PU4,STATUS_PU5,STATUS_PU6,STATUS_PU7,STATUS_PU8,STATUS_PU9,STATUS_PU10,STATUS_PU11,STATUS_V2))"
"0","tempdf <- subset(dataset3, select=-c(DATETIME,STATUS_PU1,STATUS_PU2,STATUS_PU4,STATUS_PU7,STATUS_PU8,STATUS_PU9,STATUS_PU10,STATUS_V2))"
"0","tempdf$STATUS_PU11 <- as.integer(tempdf$STATUS_PU11) "
"0","tempdf$STATUS_PU6 <- as.integer(tempdf$STATUS_PU6) "
"0","tempdf$STATUS_PU5 <- as.integer(tempdf$STATUS_PU5) "
"0","tempdf$STATUS_PU3 <- as.integer(tempdf$STATUS_PU3) "
"0","#threshold for sd"
"0","coeff1 = 2.0"
"0","coeff2 = 3.5"
"0","#function to get preds"
"0","normalmethod_2 <- function(tempdf){"
"0","  normpred <- rep(NA,nrow(tempdf))"
"0","  "
"0","  #go through every row"
"0","  for(i in 1:nrow(tempdf)){"
"0","    #not attack on default"
"0","    flag = FALSE"
"0","    #go through every column"
"0","    for(j in 1:ncol(tempdf)){"
"0","      #if > 1sd from mean then flag trigger flag"
"0","      # check1 = tempdf[i,j] - doublerange[1,j]"
"0","      # if(doublerange[2,j] >0){"
"0","      #   check11 = (tempdf[i,j] - doublerange[1,j])/doublerange[2,j]"
"0","      # }"
"0","      # else{check11 = 1}"
"0","      # check2 = doublerange[3,j]-tempdf[i,j]"
"0","      # if(doublerange[4,j] >0){"
"0","      #   check22 = (doublerange[3,j]-tempdf[i,j])/doublerange[4,j]"
"0","      # }"
"0","      # else{check22 = 1}"
"0","      # if(check1 >=0 && check11 <= 0.01){"
"0","      #   flag = TRUE"
"0","      # }"
"0","      # else if(check2 >=0 && check22 <= 0.01){"
"0","      #   flag = TRUE"
"0","      # } "
"0","      if(tempdf[i,j] - doublerange2[1,j] > coeff1*doublerange2[2,j] || doublerange2[3,j] - tempdf[i,j] > coeff2*doublerange2[4,j]){"
"0","        flag = TRUE"
"0","      }"
"0","    }"
"0","    normpred[i]=flag"
"0","    "
"0","  }"
"0","  return(normpred)"
"0","}"
